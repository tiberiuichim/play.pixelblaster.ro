+++
draft = false
date = "2007-02-21T18:35:40-02:00"
title = "Onwards to Gnome through Beryl and back to KDE"
tags = ["rants", "Linux"]
created = "2007-02-21T17:35:09-02:00"
modified = "2007-02-21T18:35:40-02:00"
permaLink = "http://play.pixelblaster.ro/blog/archive/2007/02/21/onwards-to-gnome-through-beryl-and-back-to-kde"
author = "Tiberiu Ichim"
aliases = [
    "/blog/archive/2007/02/21/onwards-to-gnome-through-beryl-and-back-to-kde"
]
+++

<p>I like my Linux to stay "on the edge", I like the excitement of knowing that on the next update you'll get new or improved software, which happens a lot in the Open Source world. So I've updated yesterday my laptop (a Compaq NX 6125) to the yet unreleased Ubuntu Feisty Fawn, an experienced that took almost 24 hours to have a fully working system at the end. I'll give some details of the problems encountered below. <br /></p><p>Having a newly updated system and already with the practice of rebooting the machine, I've decided to try and fix the 3d acceleration, for which I had the fglrx binary driver  being loaded but which didn't give me 3d acceleration. First, I've tried the open source radeon driver (who's actual driver name in the xorg.conf file is still "ati"). It worked, but it still didn't give me 3d acceleration, as my card's 3d acceleration is unsuported (onboard ATI R200M).<br /></p><p>Next on the list was to fix the fglrx. After I've uninstalled/reinstalled the fglrx driver and I've set the Composite option to Disable in the xorg.conf, I had 3d running. Plenty of details online, with guides and all, so this part was easy. While reading the documentation on the net about my card, it sparked my interest that some people had Beryl running on their laptops, with  the same card, so I've set myself on trying to get that running, to see what it's about. To make a long story short, the AIGLX extension from X.org 7.1 is not supported by the fglrx driver, so I've installed the XGL server (which is a replacement for the regular X server), and even if you see that the DRI extension is not supported by XGL and direct rendering is off, you'll still get accelerated rendering and, of course, beryl-xgl running.</p><p>To make XGL the default X server, I've changed my KDM file to something like this (taken from a recipe from the opensuse site):</p><pre>[X-:*-Core]<br />AllowNullPasswd=true<br />AllowShutdown=All<br />NoPassEnable=true<br />NoPassUsers=tibi<br />#ServerArgsLocal=-nolisten tcp<br />#ServerCmd=/usr/bin/X -br<br />ServerCmd=/usr/bin/Xgl :0 -fullscreen -accel xv:pbuffer -accel glx:pbuffer<br />ServerArgsLocal=-nolisten tcp<br />OpenRepeat=5<br />OpenDelay=15<br />OpenTimeout=2000<br />ServerTimeout=60</pre><p>KDE was slow with beryl, and with it XGL used 40% of the memory (at least apparently), while with Gnome XGL used only ~8%. So I've set myself to switch to Gnome, just to have the nice beryl effects, but in the end I've realized that, even though my Gnome desktop is really beautiful (nice Vista based fonts, nice icons similar to MacOSX) and its simplicity in working and workflow is something to appreciate, I still enjoy more in working with a system that is less "flashy" (no beryl effects) and closer to my philosophy as hacker and programer. That and being pissed off that I can't properly standby the laptop from Gnome, only from KDE and I'd still have to use KDM as login manager because GDM couldn't properly work with XGL, at least from what I've configured.</p><p>So now I'm back to my relatively non-flashy (but still nice looking, after some work) KDE.<br /></p><p>And now some words about the Edgy &gt; Feisty upgrade. In itself it went pretty much pain-free, not too many broken packages. There was one which I had to manually uninstall it before the dist-upgrade could continue, I forgot which. After the system was installed and I made sure that there were no more packages left to install, I've rebooted. The first reboots took a long time to complete (and I think the first one didn't even "make it"), so I've had to reboot in single mode and try the system from there. There were some problems with the network (the system complained about too many arguments for an iface in the /etc/networking/interfaces file) and no matter how much I've tried from KDE and Gnome, I couldn't properly configure the network with a static IP (it would get reseted to dynamic) so I had to remember the ifconfig/route lines, something I haven't use for more then 6 years. Somehow things are now fixed, probably after I've erased most of the options from that faulty interfaces file. The Enterprise Volume Management System took a really long time to boot, which it does on all Ubuntu systems I have, so I've changed the /etc/init.d/evms file to exit right at the top, after I couldn't figure out how it gets loaded and why my system needs it. My boot loading times are much faster now without it :-).</p><p>There's not much new, visually, in Gnome, except for a relatively ugly config window instead of the menu options. Why did they change that? I think I liked the menu system better. Of course, in terms of configuration windows preffered, I'm a fan of the old KControl, which I still run it when I need to configure something in KDE.<br /></p>
