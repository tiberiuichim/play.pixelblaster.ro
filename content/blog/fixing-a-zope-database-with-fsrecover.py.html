+++
draft = false
date = "2006-10-03T01:14:24-03:00"
title = "Fixing a zope database with fsrecover.py"
tags = ["zope2", "cookbook"]
created = "2006-10-03T01:00:12-03:00"
modified = "2006-10-03T14:40:26-03:00"
permaLink = "http://play.pixelblaster.ro/blog/archive/2006/10/03/fixing-a-zope-database-with-fsrecover.py"
author = "Tiberiu Ichim"
aliases = [
    "/blog/archive/2006/10/03/fixing-a-zope-database-with-fsrecover.py"
]
+++

<p>Due to hardware corruption I have a broken Data.fs that won't pack. To fix it the fsrecover.py script from the ZODB module can be used. For example, this is how to run the script to repair the broken database (I have zope installed in /opt/Zope2.8):</p><pre>cd /opt/Zope2.8/lib/python/<br />python ZODB/fsrecover.py -v 1 /mnt/raid/Data.fs /mnt/raid/Data.fs.fixed<br /></pre><p>The reason to run the fsrecover script with ZODB in front is that it imports from the ZODB module. Normally the ZODB module wouldn't be in the python path, so using this trick solves this problem. The -v 1 argument makes fsrecover print the information on the current processed transaction.</p>
