+++
draft = false
date = "2006-09-20T20:26:52-03:00"
title = "Short recipe for adaptation with Five"
tags = ["zope3", "cookbook", "Plone"]
created = "2006-09-20T15:36:57-03:00"
modified = "2006-09-20T22:36:23-03:00"
permaLink = "http://play.pixelblaster.ro/blog/archive/2006/09/20/short-recipe-for-adaptation-with-five"
author = "Tiberiu Ichim"
aliases = [
    "/blog/archive/2006/09/20/short-recipe-for-adaptation-with-five"
]
+++

<pre>&gt;&gt;&gt; from zope.interface import Interface, Attribute, implements</pre><p>Let's say we have an object type "Person". This person can introduce himself with the name.</p><pre>class IPerson(Interface):<br />    name = Attribute('Name of the person')<br />    def say_name():<br />        """The name of the person"""<br /><br />class Person(object):<br />    implements(IPerson)<br /><br />    def __init__(self, name):<br />       self.name = name<br /><br />    def say_name():<br />        return 'My name is ' + self.name<br /></pre><p>Next, we have another object type, let's say "Worker", with an interface of IWorker.<br /></p><pre>class IWorker(Interface):<br />    job = Attribute('Name of the job')<br />    def set_job():<br />        """sets the job"""<br /><br />    def say_job():<br />        """the job"""<br /></pre><p>Now we want to adapt the Person so that a person is also a Worker.</p><pre>class PersonJob(object):<br />    implements(IWorker)<br /><br />    def __init__(self, context):<br />        self.context = context<br /><br />    def set_job(self, job):<br />        self.job = job<br /><br />    def say_job(self):<br />        return "My name is %s and I work at %s" % (self.context.name, self.job)<br /></pre><p>Now let's register the factory that implements the Worker for a Person.<br /></p><pre>#### &gt;&gt;&gt; registry.register(IPerson, [IWorker,], '', PersonJob)<br /><br />&lt;configure xmlns="http://namespaces.zope.org/zope"&gt;<br />&lt;adapter<br />    for=".IPerson"<br />    provides=".IWorker"<br />    factory=".PersonJob" /&gt;<br />&lt;/configure&gt;<br /></pre><p>Now let's see how this works</p><pre>&gt;&gt;&gt; Tom = Person('Tom Sawyer')<br />&gt;&gt;&gt; print Tom.say_name()<br />'My name is Tom Sawyer'<br />&gt;&gt;&gt; tomjob = IWorker(Tom)<br />&gt;&gt;&gt; tomjob.set_job('DisneyLand')<br />&gt;&gt;&gt; tomjob.say_job()<br />'My name is Tom Sawyer and I work at DisneyLand'<br /></pre><p>Further reference:<br /></p><ul><li><a href="http://plone.org/documentation/tutorial/five-zope3-walkthrough/adapters" target="_self">http://plone.org/documentation/tutorial/five-zope3-walkthrough/adapters</a></li><li><a href="http://codespeak.net/z3/five/manual.html" target="_self">http://codespeak.net/z3/five/manual.html</a></li><li><a href="http://http://www.serverzen.net/weblog/archive/2006/09/17/keeping-client-concerns-separate" target="_self">http://www.serverzen.net/weblog/archive/2006/09/17/keeping-client-concerns-separate</a></li><li><a href="http://www.plope.com/Members/chrism/adaptation_for_busy_people" target="_self">http://www.plope.com/Members/chrism/adaptation_for_busy_people</a><br /></li><li><a href="http://plone.org/documentation/manual/plone-developer-reference/patterns/adapters" target="_self">http://plone.org/documentation/manual/plone-developer-reference/patterns/adapters</a></li><li><a href="http://svn.zope.org/Zope3/branches/3.3/src/zope/component/README.txt?view=markup" target="_self">http://svn.zope.org/Zope3/branches/3.3/src/zope/component/README.txt?view=markup</a><br /></li></ul>
