+++
draft = false
date = "2015-04-20T10:34:11+07:00"
title = "The wrong way to sudo su, and the right way"
tags = ["Linux"]
created = "2015-04-20T10:17:25+07:00"
modified = "2015-04-20T10:34:11+07:00"
permaLink = "http://play.pixelblaster.ro/blog/archive/2015/04/20/the-wrong-way-to-sudo-su-and-the-right-way"
author = "Tiberiu Ichim"
aliases = [
    "/blog/archive/2015/04/20/the-wrong-way-to-sudo-su-and-the-right-way"
]
+++

<p>I've never had a formal training on Linux. My knowledge comes from my experience working on it for the last 12 years, but some things I've just learned as simple recipes and never bother looking them up.</p>
<p>One such thing was changing users with sudo. I've been doing it as:</p>
<pre>sudo su &lt;user&gt; -</pre>
<p>Notice the dash at the end, which makes provides a "real" environment for &lt;user&gt;, just as if I would have logged in with that user, directly.</p>
<p>But this has ceased to work properly, apparently due to a <a class="external-link" href="http://serverfault.com/questions/411307/cannot-set-terminal-process-group-during-su-to-another-user-as-login-shell">bug fix in Linux TTY</a>.</p>
<p>The error that I got was:</p>
<pre>tibi@localhost:~$ sudo su zope -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
bash: cannot set terminal process group (-1): Inappropriate ioctl for device
bash: no job control in this shell
</pre>
<p>The solution is to switch the position of the dash, to:</p>
<pre>sudo su - &lt;user&gt;
</pre>
